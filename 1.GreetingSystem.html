<!DOCTYPE html>
<html>
<head>
	<title>Local Storage Demo</title>
</head>
<body>
	<div id="signIn">
		<input id="name" type="text" placeholder="Insert your name" />
		<button id="sign">Sign in</button>
	</div>
	<div id="result">
	</div>
	<script>
		(function () {
			var result = document.getElementById('result');
			var visits = localStorage.length;
			if (visits>0){
				var actualVisits = localStorage["visits"]++;
				document.getElementById('signIn').style.display = "none";
				var userNum = localStorage.key(0);
				var userNam = localStorage[userNum];
				result.innerHTML += 'Hello ' + userNam + ', how are you today?<br />';
				result.innerHTML += 'You have made ' + actualVisits + ' visits!<br />';
			}else{
				var button = document.getElementById('sign');
				button.addEventListener('click', function (e) {
					var userName = document.getElementById('name').value;
					var userNumber = visits > 0 ? visits : 1;
					localStorage.setItem("visits", "0");					
					localStorage.setItem(userNumber, userName);
					result.innerHTML += userName + ', you have registered under No. ' + userNumber + '<br />';
				});
			}
		}())
	</script>
</body>
</html>